import{forwardRef as e,useCallback as t,useEffect as n,useRef as o,useState as r}from"react";import{Button as l,Dropdown as i,Form as a,Input as c,Modal as s,message as d}from"antd";import{jsx as u,jsxs as m}from"react/jsx-runtime";const p=e=>{let{mode:t,open:n,selectedButton:o,buttonLabel:r,buttonUrl:l,buttonLabelError:i,buttonUrlError:d,onLabelChange:p,onUrlChange:f,onApply:h,onOk:g,onCancel:y}=e;return u(s,{title:"insertButton"===t?"Insert Button":"Custom Background Color",open:n,onOk:()=>{g()},onCancel:()=>{y()},okText:"insertButton"===t?"Insert":"Apply",children:"insertButton"===t?m(a,{layout:"vertical",children:[u(a.Item,{label:"Button Label",validateStatus:i?"error":"",help:i,children:u(c,{value:r,onChange:e=>null==p?void 0:p(e.target.value),placeholder:"Enter button text"})}),u(a.Item,{label:"Button URL",validateStatus:d?"error":"",help:d,children:u(c,{value:l,onChange:e=>null==f?void 0:f(e.target.value),placeholder:"Enter URL (e.g. https://...)"})})]}):u(a,{layout:"vertical",children:u(a.Item,{label:"Background Color",children:u(c,{type:"text",onChange:e=>{console.log("Input value:",e.target.value),null!=o&&o.element&&console.log("Applying color to:",o.element),null==h||h(e.target.value)},placeholder:"#000000"})})})})},f=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:u("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 6h8m-8 4h12M6 14h8m-8 4h12"})}),h=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:u("path",{fill:"currentColor",d:"M21 7H3a1 1 0 0 1 0-2h18a1 1 0 0 1 0 2m-4 4H7a1 1 0 0 1 0-2h10a1 1 0 0 1 0 2m4 4H3a1 1 0 0 1 0-2h18a1 1 0 0 1 0 2m-4 4H7a1 1 0 0 1 0-2h10a1 1 0 0 1 0 2"})}),g=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:u("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18 6h-8m8 4H6m12 4h-8m8 4H6"})}),y=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 24 24",children:m("g",{fill:"none",children:[u("path",{d:"m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),u("path",{fill:"currentColor",d:"M18 19a1 1 0 0 1 .117 1.993L18 21H6a1 1 0 0 1-.117-1.993L6 19zM17 3a1 1 0 0 1 .993.883L18 4v8a6 6 0 0 1-11.996.225L6 12V4a1 1 0 0 1 1.993-.117L8 4v8a4 4 0 0 0 7.995.2L16 12V4a1 1 0 0 1 1-1"})]})}),b=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",children:u("path",{fill:"currentColor",d:"M22 1v2h-5v1h-1v2h-1v3h-1v2h-1v3h-1v2h-1v2H9v1h7v2H2v-2h5v-1h1v-2h1v-2h1v-3h1v-2h1V8h1V6h1V4h1V3H8V1z"})}),v=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",children:u("path",{fill:"currentColor",d:"M6 4.75c0-.69.56-1.25 1.25-1.25h5a4.752 4.752 0 0 1 3.888 7.479A5 5 0 0 1 14 20.5H7.25c-.69 0-1.25-.56-1.25-1.25ZM8.5 13v5H14a2.5 2.5 0 1 0 0-5Zm0-2.5h3.751A2.25 2.25 0 0 0 12.25 6H8.5Z"})}),k=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 16 16",children:u("path",{fill:"currentColor",d:"M5.75 2.5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5m0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5m0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5M2 14a1 1 0 1 1 0-2a1 1 0 0 1 0 2m1-6a1 1 0 1 1-2 0a1 1 0 0 1 2 0M2 4a1 1 0 1 1 0-2a1 1 0 0 1 0 2"})}),w=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:m("g",{fill:"none",children:[u("path",{d:"m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),u("path",{fill:"currentColor",d:"M5.436 16.72a1.466 1.466 0 0 1 1.22 2.275a1.466 1.466 0 0 1-1.22 2.275c-.65 0-1.163-.278-1.427-.901a.65.65 0 1 1 1.196-.508a.18.18 0 0 0 .165.109c.109 0 .23-.03.23-.167c0-.1-.073-.143-.156-.154l-.051-.004a.65.65 0 0 1-.096-1.293l.096-.007c.102 0 .207-.037.207-.158c0-.137-.12-.167-.23-.167a.18.18 0 0 0-.164.11a.65.65 0 1 1-1.197-.509c.264-.622.777-.9 1.427-.9ZM20 18a1 1 0 1 1 0 2H9a1 1 0 1 1 0-2zM6.08 9.945a1.552 1.552 0 0 1 .43 2.442l-.554.593h.47a.65.65 0 1 1 0 1.3H4.573a.655.655 0 0 1-.655-.654c0-.207.029-.399.177-.557L5.559 11.5c.11-.117.082-.321-.06-.392c-.136-.068-.249.01-.275.142l-.006.059a.65.65 0 0 1-.65.65c-.39 0-.65-.327-.65-.697a1.482 1.482 0 0 1 2.163-1.317ZM20 11a1 1 0 0 1 .117 1.993L20 13H9a1 1 0 0 1-.117-1.993L9 11zM6.15 3.39v3.24a.65.65 0 1 1-1.3 0V4.522a.65.65 0 0 1-.46-1.183l.742-.495a.655.655 0 0 1 1.018.545ZM20 4a1 1 0 0 1 .117 1.993L20 6H9a1 1 0 0 1-.117-1.993L9 4z"})]})}),T=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:m("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:[u("rect",{width:"18.5",height:"11",x:"2.75",y:"6.5",rx:"4"}),u("path",{d:"M7 12h10"})]})}),x=e=>{let{active:t,onClick:n,icon:o,label:r,tooltip:l}=e;return u("button",{className:"px-2 py-1 rounded ".concat(t?"bg-gray-500 text-white":"bg-gray-100"),onClick:n,title:l,children:o||r})},C=e((e,t)=>{let{initialHtml:o,className:r,onFocus:l,onBlur:i,contentEditable:a=!0}=e;return n(()=>{t&&"function"!=typeof t&&t.current&&o&&(t.current.innerHTML=o)},[t,o]),u("div",{ref:t,className:"open-cdp-editor ".concat(r," w-fit min-w-[400px] mx-auto my-0 h-[400px] box-border border border-gray-300 overflow-y-auto p-2 rounded-lg focus:outline-none scrollbar-thin scrollbar-thumb-gray-400"),contentEditable:a,onFocus:l,onBlur:i})}),E=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:m("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:[u("path",{d:"M16.24 3.5h-8.5a5 5 0 0 0-5 5v7a5 5 0 0 0 5 5h8.5a5 5 0 0 0 5-5v-7a5 5 0 0 0-5-5"}),u("path",{d:"m2.99 17l2.75-3.2a2.2 2.2 0 0 1 2.77-.27a2.2 2.2 0 0 0 2.77-.27l2.33-2.33a4 4 0 0 1 5.16-.43l2.49 1.93M7.99 10.17a1.66 1.66 0 1 0 0-3.32a1.66 1.66 0 0 0 0 3.32"})]})}),A=()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:u("path",{fill:"#000",d:"M20 6.91L17.09 4L12 9.09L6.91 4L4 6.91L9.09 12L4 17.09L6.91 20L12 14.91L17.09 20L20 17.09L14.91 12z"})}),L=e=>{let{onClose:t,children:n}=e;return u("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-[#00000062]",children:m("div",{className:"bg-white rounded-2xl w-[55%] h-[500px] mx-auto p-6 relative",children:[u(l,{onClick:t,icon:u(A,{}),className:"absolute top-4 right-4 flex justify-center items-center"}),u("div",{children:n})]})})},S=e=>{let{children:t,onImageSelect:n}=e;const[o,i]=r(!1);return m("div",{children:[u(l,{icon:u(E,{}),onClick:()=>i(!0),className:"px-2 py-1 rounded bg-gray-100"}),o&&u(L,{onClose:()=>i(!1),children:u("div",{onClick:e=>{const t=e.target;if("IMG"===t.tagName){n(t.src),i(!1)}},children:t})})]})},{entries:N,setPrototypeOf:_,isFrozen:R,getPrototypeOf:O,getOwnPropertyDescriptor:D}=Object;let{freeze:M,seal:I,create:B}=Object,{apply:H,construct:z}="undefined"!=typeof Reflect&&Reflect;M||(M=function(e){return e}),I||(I=function(e){return e}),H||(H=function(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return e.apply(t,o)}),z||(z=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return new e(...n)});const U=ee(Array.prototype.forEach),P=ee(Array.prototype.lastIndexOf),F=ee(Array.prototype.pop),W=ee(Array.prototype.push),j=ee(Array.prototype.splice),G=ee(String.prototype.toLowerCase),q=ee(String.prototype.toString),Y=ee(String.prototype.match),V=ee(String.prototype.replace),X=ee(String.prototype.indexOf),Z=ee(String.prototype.trim),$=ee(Object.prototype.hasOwnProperty),K=ee(RegExp.prototype.test),J=(Q=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return z(Q,t)});var Q;function ee(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return H(e,t,o)}}function te(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;_&&_(e,null);let o=t.length;for(;o--;){let r=t[o];if("string"==typeof r){const e=n(r);e!==r&&(R(t)||(t[o]=e),r=e)}e[r]=!0}return e}function ne(e){for(let t=0;t<e.length;t++){$(e,t)||(e[t]=null)}return e}function oe(e){const t=B(null);for(const[n,o]of N(e)){$(e,n)&&(Array.isArray(o)?t[n]=ne(o):o&&"object"==typeof o&&o.constructor===Object?t[n]=oe(o):t[n]=o)}return t}function re(e,t){for(;null!==e;){const n=D(e,t);if(n){if(n.get)return ee(n.get);if("function"==typeof n.value)return ee(n.value)}e=O(e)}return function(){return null}}const le=M(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ie=M(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ae=M(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ce=M(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),se=M(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),de=M(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ue=M(["#text"]),me=M(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),pe=M(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fe=M(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),he=M(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ge=I(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ye=I(/<%[\w\W]*|[\w\W]*%>/gm),be=I(/\$\{[\w\W]*/gm),ve=I(/^data-[\-\w.\u00B7-\uFFFF]+$/),ke=I(/^aria-[\-\w]+$/),we=I(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Te=I(/^(?:\w+script|data):/i),xe=I(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ce=I(/^html$/i),Ee=I(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ae=Object.freeze({__proto__:null,ARIA_ATTR:ke,ATTR_WHITESPACE:xe,CUSTOM_ELEMENT:Ee,DATA_ATTR:ve,DOCTYPE_NAME:Ce,ERB_EXPR:ye,IS_ALLOWED_URI:we,IS_SCRIPT_OR_DATA:Te,MUSTACHE_EXPR:ge,TMPLIT_EXPR:be});const Le=1,Se=3,Ne=7,_e=8,Re=9,Oe=function(){return"undefined"==typeof window?null:window};var De=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe();const n=t=>e(t);if(n.version="3.3.1",n.removed=[],!t||!t.document||t.document.nodeType!==Re||!t.Element)return n.isSupported=!1,n;let{document:o}=t;const r=o,l=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:c,Element:s,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:p,trustedTypes:f}=t,h=s.prototype,g=re(h,"cloneNode"),y=re(h,"remove"),b=re(h,"nextSibling"),v=re(h,"childNodes"),k=re(h,"parentNode");if("function"==typeof a){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let w,T="";const{implementation:x,createNodeIterator:C,createDocumentFragment:E,getElementsByTagName:A}=o,{importNode:L}=r;let S={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof N&&"function"==typeof k&&x&&void 0!==x.createHTMLDocument;const{MUSTACHE_EXPR:_,ERB_EXPR:R,TMPLIT_EXPR:O,DATA_ATTR:D,ARIA_ATTR:I,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:z,CUSTOM_ELEMENT:Q}=Ae;let{IS_ALLOWED_URI:ee}=Ae,ne=null;const ge=te({},[...le,...ie,...ae,...se,...ue]);let ye=null;const be=te({},[...me,...pe,...fe,...he]);let ve=Object.seal(B(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ke=null,Te=null;const xe=Object.seal(B(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Ee=!0,De=!0,Me=!1,Ie=!0,Be=!1,He=!0,ze=!1,Ue=!1,Pe=!1,Fe=!1,We=!1,je=!1,Ge=!0,qe=!1,Ye=!0,Ve=!1,Xe={},Ze=null;const $e=te({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ke=null;const Je=te({},["audio","video","img","source","image","track"]);let Qe=null;const et=te({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tt="http://www.w3.org/1998/Math/MathML",nt="http://www.w3.org/2000/svg",ot="http://www.w3.org/1999/xhtml";let rt=ot,lt=!1,it=null;const at=te({},[tt,nt,ot],q);let ct=te({},["mi","mo","mn","ms","mtext"]),st=te({},["annotation-xml"]);const dt=te({},["title","style","font","a","script"]);let ut=null;const mt=["application/xhtml+xml","text/html"];let pt=null,ft=null;const ht=o.createElement("form"),gt=function(e){return e instanceof RegExp||e instanceof Function},yt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ft||ft!==e){if(e&&"object"==typeof e||(e={}),e=oe(e),ut=-1===mt.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,pt="application/xhtml+xml"===ut?q:G,ne=$(e,"ALLOWED_TAGS")?te({},e.ALLOWED_TAGS,pt):ge,ye=$(e,"ALLOWED_ATTR")?te({},e.ALLOWED_ATTR,pt):be,it=$(e,"ALLOWED_NAMESPACES")?te({},e.ALLOWED_NAMESPACES,q):at,Qe=$(e,"ADD_URI_SAFE_ATTR")?te(oe(et),e.ADD_URI_SAFE_ATTR,pt):et,Ke=$(e,"ADD_DATA_URI_TAGS")?te(oe(Je),e.ADD_DATA_URI_TAGS,pt):Je,Ze=$(e,"FORBID_CONTENTS")?te({},e.FORBID_CONTENTS,pt):$e,ke=$(e,"FORBID_TAGS")?te({},e.FORBID_TAGS,pt):oe({}),Te=$(e,"FORBID_ATTR")?te({},e.FORBID_ATTR,pt):oe({}),Xe=!!$(e,"USE_PROFILES")&&e.USE_PROFILES,Ee=!1!==e.ALLOW_ARIA_ATTR,De=!1!==e.ALLOW_DATA_ATTR,Me=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ie=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Be=e.SAFE_FOR_TEMPLATES||!1,He=!1!==e.SAFE_FOR_XML,ze=e.WHOLE_DOCUMENT||!1,Fe=e.RETURN_DOM||!1,We=e.RETURN_DOM_FRAGMENT||!1,je=e.RETURN_TRUSTED_TYPE||!1,Pe=e.FORCE_BODY||!1,Ge=!1!==e.SANITIZE_DOM,qe=e.SANITIZE_NAMED_PROPS||!1,Ye=!1!==e.KEEP_CONTENT,Ve=e.IN_PLACE||!1,ee=e.ALLOWED_URI_REGEXP||we,rt=e.NAMESPACE||ot,ct=e.MATHML_TEXT_INTEGRATION_POINTS||ct,st=e.HTML_INTEGRATION_POINTS||st,ve=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&gt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ve.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&gt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ve.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ve.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Be&&(De=!1),We&&(Fe=!0),Xe&&(ne=te({},ue),ye=[],!0===Xe.html&&(te(ne,le),te(ye,me)),!0===Xe.svg&&(te(ne,ie),te(ye,pe),te(ye,he)),!0===Xe.svgFilters&&(te(ne,ae),te(ye,pe),te(ye,he)),!0===Xe.mathMl&&(te(ne,se),te(ye,fe),te(ye,he))),e.ADD_TAGS&&("function"==typeof e.ADD_TAGS?xe.tagCheck=e.ADD_TAGS:(ne===ge&&(ne=oe(ne)),te(ne,e.ADD_TAGS,pt))),e.ADD_ATTR&&("function"==typeof e.ADD_ATTR?xe.attributeCheck=e.ADD_ATTR:(ye===be&&(ye=oe(ye)),te(ye,e.ADD_ATTR,pt))),e.ADD_URI_SAFE_ATTR&&te(Qe,e.ADD_URI_SAFE_ATTR,pt),e.FORBID_CONTENTS&&(Ze===$e&&(Ze=oe(Ze)),te(Ze,e.FORBID_CONTENTS,pt)),e.ADD_FORBID_CONTENTS&&(Ze===$e&&(Ze=oe(Ze)),te(Ze,e.ADD_FORBID_CONTENTS,pt)),Ye&&(ne["#text"]=!0),ze&&te(ne,["html","head","body"]),ne.table&&(te(ne,["tbody"]),delete ke.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw J('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw J('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,T=w.createHTML("")}else void 0===w&&(w=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const o="data-tt-policy-suffix";t&&t.hasAttribute(o)&&(n=t.getAttribute(o));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(f,l)),null!==w&&"string"==typeof T&&(T=w.createHTML(""));M&&M(e),ft=e}},bt=te({},[...ie,...ae,...ce]),vt=te({},[...se,...de]),kt=function(e){W(n.removed,{element:e});try{k(e).removeChild(e)}catch(t){y(e)}},wt=function(e,t){try{W(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){W(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(Fe||We)try{kt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Tt=function(e){let t=null,n=null;if(Pe)e="<remove></remove>"+e;else{const t=Y(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ut&&rt===ot&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=w?w.createHTML(e):e;if(rt===ot)try{t=(new p).parseFromString(r,ut)}catch(e){}if(!t||!t.documentElement){t=x.createDocument(rt,"template",null);try{t.documentElement.innerHTML=lt?T:r}catch(e){}}const l=t.body||t.documentElement;return e&&n&&l.insertBefore(o.createTextNode(n),l.childNodes[0]||null),rt===ot?A.call(t,ze?"html":"body")[0]:ze?t.documentElement:l},xt=function(e){return C.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Ct=function(e){return e instanceof m&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Et=function(e){return"function"==typeof c&&e instanceof c};function At(e,t,o){U(e,e=>{e.call(n,t,o,ft)})}const Lt=function(e){let t=null;if(At(S.beforeSanitizeElements,e,null),Ct(e))return kt(e),!0;const o=pt(e.nodeName);if(At(S.uponSanitizeElement,e,{tagName:o,allowedTags:ne}),He&&e.hasChildNodes()&&!Et(e.firstElementChild)&&K(/<[/\w!]/g,e.innerHTML)&&K(/<[/\w!]/g,e.textContent))return kt(e),!0;if(e.nodeType===Ne)return kt(e),!0;if(He&&e.nodeType===_e&&K(/<[/\w]/g,e.data))return kt(e),!0;if(!(xe.tagCheck instanceof Function&&xe.tagCheck(o))&&(!ne[o]||ke[o])){if(!ke[o]&&Nt(o)){if(ve.tagNameCheck instanceof RegExp&&K(ve.tagNameCheck,o))return!1;if(ve.tagNameCheck instanceof Function&&ve.tagNameCheck(o))return!1}if(Ye&&!Ze[o]){const t=k(e)||e.parentNode,n=v(e)||e.childNodes;if(n&&t){for(let o=n.length-1;o>=0;--o){const r=g(n[o],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,b(e))}}}return kt(e),!0}return e instanceof s&&!function(e){let t=k(e);t&&t.tagName||(t={namespaceURI:rt,tagName:"template"});const n=G(e.tagName),o=G(t.tagName);return!!it[e.namespaceURI]&&(e.namespaceURI===nt?t.namespaceURI===ot?"svg"===n:t.namespaceURI===tt?"svg"===n&&("annotation-xml"===o||ct[o]):Boolean(bt[n]):e.namespaceURI===tt?t.namespaceURI===ot?"math"===n:t.namespaceURI===nt?"math"===n&&st[o]:Boolean(vt[n]):e.namespaceURI===ot?!(t.namespaceURI===nt&&!st[o])&&!(t.namespaceURI===tt&&!ct[o])&&!vt[n]&&(dt[n]||!bt[n]):!("application/xhtml+xml"!==ut||!it[e.namespaceURI]))}(e)?(kt(e),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!K(/<\/no(script|embed|frames)/i,e.innerHTML)?(Be&&e.nodeType===Se&&(t=e.textContent,U([_,R,O],e=>{t=V(t,e," ")}),e.textContent!==t&&(W(n.removed,{element:e.cloneNode()}),e.textContent=t)),At(S.afterSanitizeElements,e,null),!1):(kt(e),!0)},St=function(e,t,n){if(Ge&&("id"===t||"name"===t)&&(n in o||n in ht))return!1;if(De&&!Te[t]&&K(D,t));else if(Ee&&K(I,t));else if(xe.attributeCheck instanceof Function&&xe.attributeCheck(t,e));else if(!ye[t]||Te[t]){if(!(Nt(e)&&(ve.tagNameCheck instanceof RegExp&&K(ve.tagNameCheck,e)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(e))&&(ve.attributeNameCheck instanceof RegExp&&K(ve.attributeNameCheck,t)||ve.attributeNameCheck instanceof Function&&ve.attributeNameCheck(t,e))||"is"===t&&ve.allowCustomizedBuiltInElements&&(ve.tagNameCheck instanceof RegExp&&K(ve.tagNameCheck,n)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(n))))return!1}else if(Qe[t]);else if(K(ee,V(n,z,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==X(n,"data:")||!Ke[e]){if(Me&&!K(H,V(n,z,"")));else if(n)return!1}else;return!0},Nt=function(e){return"annotation-xml"!==e&&Y(e,Q)},_t=function(e){At(S.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Ct(e))return;const o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ye,forceKeepAttr:void 0};let r=t.length;for(;r--;){const l=t[r],{name:i,namespaceURI:a,value:c}=l,s=pt(i),d=c;let u="value"===i?d:Z(d);if(o.attrName=s,o.attrValue=u,o.keepAttr=!0,o.forceKeepAttr=void 0,At(S.uponSanitizeAttribute,e,o),u=o.attrValue,!qe||"id"!==s&&"name"!==s||(wt(i,e),u="user-content-"+u),He&&K(/((--!?|])>)|<\/(style|title|textarea)/i,u)){wt(i,e);continue}if("attributename"===s&&Y(u,"href")){wt(i,e);continue}if(o.forceKeepAttr)continue;if(!o.keepAttr){wt(i,e);continue}if(!Ie&&K(/\/>/i,u)){wt(i,e);continue}Be&&U([_,R,O],e=>{u=V(u,e," ")});const m=pt(e.nodeName);if(St(m,s,u)){if(w&&"object"==typeof f&&"function"==typeof f.getAttributeType)if(a);else switch(f.getAttributeType(m,s)){case"TrustedHTML":u=w.createHTML(u);break;case"TrustedScriptURL":u=w.createScriptURL(u)}if(u!==d)try{a?e.setAttributeNS(a,i,u):e.setAttribute(i,u),Ct(e)?kt(e):F(n.removed)}catch(t){wt(i,e)}}else wt(i,e)}At(S.afterSanitizeAttributes,e,null)},Rt=function e(t){let n=null;const o=xt(t);for(At(S.beforeSanitizeShadowDOM,t,null);n=o.nextNode();)At(S.uponSanitizeShadowNode,n,null),Lt(n),_t(n),n.content instanceof i&&e(n.content);At(S.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null,l=null,a=null,s=null;if(lt=!e,lt&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Et(e)){if("function"!=typeof e.toString)throw J("toString is not a function");if("string"!=typeof(e=e.toString()))throw J("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Ue||yt(t),n.removed=[],"string"==typeof e&&(Ve=!1),Ve){if(e.nodeName){const t=pt(e.nodeName);if(!ne[t]||ke[t])throw J("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof c)o=Tt("\x3c!----\x3e"),l=o.ownerDocument.importNode(e,!0),l.nodeType===Le&&"BODY"===l.nodeName||"HTML"===l.nodeName?o=l:o.appendChild(l);else{if(!Fe&&!Be&&!ze&&-1===e.indexOf("<"))return w&&je?w.createHTML(e):e;if(o=Tt(e),!o)return Fe?null:je?T:""}o&&Pe&&kt(o.firstChild);const d=xt(Ve?e:o);for(;a=d.nextNode();)Lt(a),_t(a),a.content instanceof i&&Rt(a.content);if(Ve)return e;if(Fe){if(We)for(s=E.call(o.ownerDocument);o.firstChild;)s.appendChild(o.firstChild);else s=o;return(ye.shadowroot||ye.shadowrootmode)&&(s=L.call(r,s,!0)),s}let u=ze?o.outerHTML:o.innerHTML;return ze&&ne["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&K(Ce,o.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+u),Be&&U([_,R,O],e=>{u=V(u,e," ")}),w&&je?w.createHTML(u):u},n.setConfig=function(){yt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Ue=!0},n.clearConfig=function(){ft=null,Ue=!1},n.isValidAttribute=function(e,t,n){ft||yt({});const o=pt(e),r=pt(t);return St(o,r,n)},n.addHook=function(e,t){"function"==typeof t&&W(S[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=P(S[e],t);return-1===n?void 0:j(S[e],n,1)[0]}return F(S[e])},n.removeHooks=function(e){S[e]=[]},n.removeAllHooks=function(){S={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();De.addHook("uponSanitizeAttribute",(e,t)=>{if(e&&"function"==typeof e.hasAttribute&&"style"===t.attrName){const e=(t.attrValue||"").split(";").map(e=>e.trim()).filter(e=>{const[t]=e.split(":").map(e=>e.trim().toLowerCase());return["color","font-weight","font-style","text-decoration","background-color","font-size","text-align","float","margin","margin-left","margin-right","margin-top","margin-bottom","display","width","max-width","height","padding","border-radius","object-fit","cursor"].includes(t)}).join("; ");e?t.attrValue=e:t.keepAttr=!1}});const Me=e=>'\n      <!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <title>Exported Document</title>\n      </head>\n      <body>\n        '.concat(e,"\n      </body>\n      </html>\n    "),Ie=["value","onChange","className","initialValue","imageChildren","exportFullHTML","onInsertText"];const Be=function(e){let{value:l,onChange:a,className:c,initialValue:s,imageChildren:E,exportFullHTML:A,onInsertText:L}=e,N=function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Ie);const{align:_,boldActive:R,italicActive:O,underlineActive:D,formatBlock:M,orderedListActive:I,unorderedListActive:B}=(()=>{const[e,n]=r(""),[l,i]=r(!1),[a,c]=r(!1),[s,d]=r(!1),[u,m]=r(""),[p,f]=r(!1),[h,g]=r(!1),[y,b]=r(!1),[v,k]=r(""),w=o(null),T=t(()=>{requestAnimationFrame(()=>{var t;const o=document.queryCommandState("bold"),r=document.queryCommandState("italic"),y=document.queryCommandState("underline"),b=document.queryCommandState("insertOrderedList"),v=document.queryCommandState("insertUnorderedList"),k=null===(t=document.queryCommandValue("formatBlock"))||void 0===t?void 0:t.toLowerCase();o!==l&&i(o),r!==a&&c(r),y!==s&&d(y),b!==p&&f(b),v!==h&&g(v),k!==u&&m(k);const w=window.getSelection();if(!w||0===w.rangeCount)return;let T=w.anchorNode;for(;T;){if(1===T.nodeType){const e=window.getComputedStyle(T).display;if("block"===e||"flex"===e)break}T=T.parentElement}let x="";if(T){const e=window.getComputedStyle(T).textAlign;x="center"===e?"center":"right"===e?"right":"left"}x!==e&&n(x)})},[l,a,s,p,h,u,e]);return{align:e,boldActive:l,italicActive:a,underlineActive:s,formatBlock:u,orderedListActive:p,unorderedListActive:h,linkDropdownOpen:y,linkUrl:v,savedSelection:w,handleSelectionChange:T,setLinkDropdownOpen:b,setLinkUrl:k}})(),[H,z]=r(null),[U,P]=r(null),[F,W]=r(null),j=o(null),G=o(null);n(()=>{if(j.current&&s){const t=(e=>{const t=(new DOMParser).parseFromString(e,"text/html"),n=t.querySelector("style");let o=t.body.innerHTML;n&&(o='<div class="editor-styles-container">'.concat(n.outerHTML,"</div>")+o);return o})(s);j.current.innerHTML=(e=t,De.sanitize(e,{ALLOWED_TAGS:["b","i","u","strong","em","span","div","br","p","h1","h2","h3","ul","ol","li","a","img"],ALLOWED_ATTR:["style","href","target","rel","src","alt","width","height","draggable"],FORBID_ATTR:["onerror","onclick","onload"],FORBID_TAGS:["script","iframe","object","embed"]}))}else j.current&&(j.current.innerHTML="");var e},[s]);const[q,Y]=r(!1),[V,X]=r(""),[Z,$]=r(""),[K,J]=r(""),[Q,ee]=r(""),[te,ne]=r({top:0,left:0}),[oe,re]=r({top:0,left:0}),[le,ie]=r(!1),[ae,ce]=r(""),[se,de]=r(""),[ue,me]=r(null),[pe,fe]=r(!1),[he,ge]=r({top:0,left:0}),ye=()=>{};n(()=>{const e=j.current;if(!e)return;const t=()=>{if(a){const t=e.innerHTML;a(A?Me(t):t)}};return document.addEventListener("selectionchange",ye),e.addEventListener("input",t),()=>{document.removeEventListener("selectionchange",ye),e.removeEventListener("input",t)}},[a,A]),n(()=>{const e=j.current;if(!e)return;let t=null;const n=e=>{var n,o;e.target&&"IMG"===e.target.tagName&&(t=e.target,null===(n=e.dataTransfer)||void 0===n||n.setData("text/html",t.outerHTML),null===(o=e.dataTransfer)||void 0===o||o.setData("text/plain",t.src))},o=e=>{e.preventDefault()},r=n=>{if(n.preventDefault(),t&&e.contains(t)){const e=l(n);if(e){var o;const n=t.cloneNode(!0);e.insertNode(n),e.collapse(!1),null===(o=t.parentNode)||void 0===o||o.removeChild(t)}}t=null},l=e=>{if(document.caretRangeFromPoint)return document.caretRangeFromPoint(e.clientX,e.clientY);if(e.rangeParent){const t=document.createRange();return t.setStart(e.rangeParent,e.rangeOffset),t}return null};return e.addEventListener("dragstart",n),e.addEventListener("dragover",o),e.addEventListener("drop",r),()=>{e.removeEventListener("dragstart",n),e.removeEventListener("dragover",o),e.removeEventListener("drop",r)}},[]);const be=(e,t)=>{var n;const o=window.getSelection(),r=o&&o.isCollapsed,l="bold"===e||"italic"===e||"underline"===e;if("formatBlock"===e&&("H1"===t||"H2"===t||"H3"===t)&&j.current)M===t?document.execCommand("formatBlock",!1,"P"):document.execCommand(e,!1,t);else if(l&&r&&j.current&&document.activeElement===j.current){document.execCommand(e,!1,t),document.execCommand("insertHTML",!1,"<span>â€‹</span>");const n=document.createRange(),r=j.current;r.lastChild&&(n.setStartAfter(r.lastChild),n.collapse(!0),null==o||o.removeAllRanges(),null==o||o.addRange(n))}else document.execCommand(e,!1,t);null===(n=j.current)||void 0===n||n.focus()};n(()=>{let e=null,t=null,n=null;const o=o=>{const r=o.target;if(!r)return;const l=j.current,i=document.querySelector(".ant-dropdown"),a=document.querySelector(".ant-modal");if(a&&a.contains(r)||i&&i.contains(r))return;const c=r.closest("a"),s=r.closest("img"),d=()=>{e&&(e.style.outline="none",e=null,z(null)),t&&(t.style.outline="none",t=null,P(null)),n&&(n.style.outline="none",n=null,W(null))};if(l&&!l.contains(r))return void d();let u=!1;if(c&&null!=l&&l.contains(c)?(o.preventDefault(),e!==c&&d(),c.style.outline="2px solid #3b82f6",e=c,z({element:c,x:o.clientX,y:o.clientY}),u=!0):s&&null!=l&&l.contains(s)&&(o.preventDefault(),t!==s&&d(),s.style.outline="2px solid #3b82f6",t=s,P({element:s,x:o.clientX,y:o.clientY}),u=!0),!u){const e=window.getSelection();if(e&&e.rangeCount>0&&!e.isCollapsed){var m;const t=null===(m=e.getRangeAt(0).startContainer.parentElement)||void 0===m?void 0:m.closest("p, div, span, section, article, main, header, footer, aside, nav");if(t&&null!=l&&l.contains(t)){n!==t&&d(),t.style.outline="2px solid #3b82f6",n=t;const e=t.getBoundingClientRect();W({element:t,x:e.left,y:e.top}),u=!0}}}u||d()};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[]);const ve=((e,t,n,o,r,l,i)=>({onClick:a=>{if(null==e||!e.element)return;const c=e.element;if("edit"===a.key)r(c.innerText),l(c.getAttribute("href")||""),i(c),o(!0);else if("delete"===a.key)c.remove(),n(null);else if(a.key.startsWith("align-")){const e=a.key.replace("align-","");c.style.textAlign=e;const t=c.closest("div, p, section, article");t&&(t.style.textAlign=e)}else{if(!c)return void console.error("Button element is not defined.");a.key.startsWith("bg-")?((e,t)=>{e.style.backgroundColor=t})(c,a.key.replace("bg-","")):a.key.startsWith("text-")?((e,t)=>{e.style.color=t})(c,a.key.replace("text-","")):a.key.startsWith("radius-")?((e,t)=>{e.style.borderRadius=t})(c,a.key.replace("radius-","")):a.key.startsWith("padding-")?((e,t)=>{e.style.padding=t})(c,a.key.replace("padding-","")):"remove-bg"===a.key?(e=>{e.style.backgroundColor=""})(c):"remove-border"===a.key?(e=>{e.style.border=""})(c):"remove-padding"===a.key?(e=>{e.style.padding=""})(c):"custom-bg-color"===a.key&&t(!0)}},items:[{key:"edit",label:"Edit Button"},{key:"align",label:"Align Button",children:[{key:"align-left",label:"Left"},{key:"align-center",label:"Center"},{key:"align-right",label:"Right"}]},{key:"bg-color",label:"Background Color",children:[{key:"bg-#3b82f6",label:"Blue"},{key:"bg-#10b981",label:"Green"},{key:"bg-#ef4444",label:"Red"},{key:"bg-#f59e0b",label:"Orange"},{key:"bg-#8b5cf6",label:"Purple"},{key:"bg-#000000",label:"Black"}]},{key:"border-radius",label:"Border Radius",children:[{key:"radius-0px",label:"Square"},{key:"radius-2px",label:"Default"},{key:"radius-4px",label:"Large"},{key:"radius-9999px",label:"Pill"}]},{key:"text-color",label:"Text Color",children:[{key:"text-#ffffff",label:"White"},{key:"text-#000000",label:"Black"}]},{key:"padding",label:"Padding",children:[{key:"padding-8px 16px",label:"Small"},{key:"padding-12px 24px",label:"Default"},{key:"padding-16px 32px",label:"Large"},{key:"padding-20px 40px",label:"Extra Large"}]},{type:"divider"},{key:"remove-bg",label:"Remove Background"},{key:"remove-border",label:"Remove Border"},{key:"remove-padding",label:"Remove Padding"},{key:"delete",label:"Delete Button",danger:!0}]}))(H,fe,z,ie,ce,de,me),ke=((e,t)=>({onClick:n=>{if(null==e||!e.element)return;const o=e.element;var r,l;n.key.startsWith("resize-")?(r=o,l=n.key.replace("resize-",""),r.style.width=l):n.key.startsWith("align-")?((e,t)=>{e.style.display="block",e.style.margin="center"===t?"auto":"0 ".concat("right"===t?"0 0 auto":"auto 0 0")})(o,n.key.replace("align-","")):n.key.startsWith("border-")?((e,t)=>{e.style.borderRadius=t})(o,n.key.replace("border-","")):"remove"===n.key&&(o.remove(),t(null))},items:[{key:"resize",label:"Resize",children:[{key:"resize-25%",label:"25%"},{key:"resize-50%",label:"50%"},{key:"resize-75%",label:"75%"},{key:"resize-100%",label:"100%"}]},{key:"align",label:"Align",children:[{key:"align-left",label:"Left"},{key:"align-center",label:"Center"},{key:"align-right",label:"Right"}]},{key:"border",label:"Border Radius",children:[{key:"border-0px",label:"None"},{key:"border-8px",label:"Small"},{key:"border-16px",label:"Medium"},{key:"border-24px",label:"Large"}]},{type:"divider"},{key:"remove",label:"Remove Image",danger:!0}]}))(U,P),we=(e=>({onClick:t=>{if(null==e||!e.element)return;const n=e.element;var o,r;t.key.startsWith("border-")?(o=n,r=t.key.replace("border-",""),o.style.border=r):t.key.startsWith("radius-")?((e,t)=>{e.style.borderRadius=t})(n,t.key.replace("radius-","")):"remove-border"===t.key&&(e=>{e.style.border=""})(n)},items:[{key:"border",label:"Border",children:[{key:"border-1px solid #000",label:"Black"},{key:"border-1px solid #3b82f6",label:"Blue"},{key:"border-1px solid #10b981",label:"Green"},{key:"border-1px solid #ef4444",label:"Red"}]},{key:"border-radius",label:"Border Radius",children:[{key:"radius-0px",label:"None"},{key:"radius-4px",label:"Small"},{key:"radius-8px",label:"Medium"},{key:"radius-12px",label:"Large"}]},{type:"divider"},{key:"remove-border",label:"Remove Border"}]}))(F);n(()=>{if(H){const e=H.element.getBoundingClientRect();ne({top:e.bottom+window.scrollY,left:e.left+window.scrollX})}},[H]),n(()=>{if(U){const e=U.element.getBoundingClientRect();ge({top:e.bottom+window.scrollY,left:e.left+window.scrollX})}},[U]),n(()=>{if(F){const e=F.element.getBoundingClientRect();re({top:e.bottom+window.scrollY,left:e.left+window.scrollX})}},[F]);const Te=e=>{const t=j.current;if(t){const n=window.getSelection();if(n&&n.rangeCount>0){const t=n.getRangeAt(0);t.deleteContents(),t.insertNode(document.createTextNode(e)),t.collapse(!1)}t.focus()}};return n(()=>{L&&L(Te)},[L]),n(()=>{j.current&&void 0!==l&&(j.current.innerHTML=l)},[l]),n(()=>{const e=j.current;if(!e)return;const t=()=>{if(a){const t=e.innerHTML;a(A?Me(t):t)}};return e.addEventListener("input",t),()=>{e.removeEventListener("input",t)}},[a,A]),m("div",{className:"w-full border-2 border-gray-300 p-3 rounded-lg shadow-lg relative",children:[m("div",{className:"flex flex-wrap mb-2 gap-1 border-b-2 border-gray-300 pb-2 ",children:[u(x,{active:R,onClick:()=>be("bold"),tooltip:"Bold",icon:u(v,{})}),u(x,{active:O,onClick:()=>be("italic"),tooltip:"Italic",icon:u(b,{})}),u(x,{active:D,onClick:()=>be("underline"),tooltip:"Underline",icon:u(y,{})}),u(x,{active:"h1"===M,onClick:()=>be("formatBlock","H1"),tooltip:"Heading 1",label:"H1"}),u(x,{active:"h2"===M,onClick:()=>be("formatBlock","H2"),tooltip:"Heading 2",label:"H2"}),u(x,{active:"h3"===M,onClick:()=>be("formatBlock","H3"),tooltip:"Heading 3",label:"H3"}),u(x,{active:B,onClick:()=>be("insertUnorderedList"),tooltip:"Unordered List",icon:u(k,{})}),u(x,{active:I,onClick:()=>be("insertOrderedList"),tooltip:"Ordered List",icon:u(w,{})}),u(x,{active:"left"===_,onClick:()=>be("justifyLeft"),tooltip:"Align Left",icon:u(f,{})}),u(x,{active:"center"===_,onClick:()=>be("justifyCenter"),tooltip:"Align Center",icon:u(h,{})}),u(x,{active:"right"===_,onClick:()=>be("justifyRight"),tooltip:"Align Right",icon:u(g,{})}),u(S,{children:E,onImageSelect:e=>{if(j.current){j.current.focus();const t=window.getSelection();if(t&&t.rangeCount>0){const n=t.getRangeAt(0),o=document.createElement("img");o.src=e,o.style.maxWidth="100%",o.draggable=!0,n.insertNode(o),n.collapse(!1)}else{const t=document.createElement("img");t.src=e,t.style.maxWidth="100%",t.draggable=!0,j.current.appendChild(t)}}}}),u(x,{onClick:()=>{const e=window.getSelection();e&&e.rangeCount>0&&(G.current=e.getRangeAt(0).cloneRange()),Y(!0),X(""),$(""),J(""),ee("")},icon:u(T,{}),tooltip:"Insert Button",label:"Button"}),u(p,{mode:"insertButton",open:q,buttonLabel:V,buttonUrl:Z,buttonLabelError:K,buttonUrlError:Q,onLabelChange:X,onUrlChange:$,onOk:()=>{let e=!1;if(V.trim()?J(""):(J("Button label is required"),e=!0),Z.trim()?ee(""):(ee("URL is required"),e=!0),!e){if(j.current){const e=window.getSelection();null==e||e.removeAllRanges(),G.current&&(null==e||e.addRange(G.current));const t='<a href="'.concat(Z,'" target="_blank" rel="noopener noreferrer" style="text-decoration: none !important;">').concat(V,"</a>");document.execCommand("insertHTML",!1,t),j.current.focus()}Y(!1),G.current=null}},onCancel:()=>Y(!1)}),u(p,{mode:"insertButton",open:le,buttonLabel:ae,buttonUrl:se,buttonLabelError:K,buttonUrlError:Q,onLabelChange:ce,onUrlChange:de,onOk:()=>{ue&&(ue.textContent=ae,ue.setAttribute("href",se),d.success("Button updated successfully."),ie(!1),me(null))},onCancel:()=>ie(!1)}),u(p,{mode:"customBg",open:pe,onApply:e=>{if(console.log("Custom background color applied:",e),null!=H&&H.element){console.log("Selected button element:",H.element);const t=(e,t)=>{e.style.backgroundColor=t};t(H.element,e)}else console.error("No button selected to apply background color.")},selectedButton:H,onOk:()=>fe(!1),onCancel:()=>fe(!1)})]}),u(C,{ref:j,className:c,onFocus:N.onFocus,onBlur:N.onBlur,contentEditable:!N.readOnly}),N.readOnly&&u("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.7)",border:"2px solid red",zIndex:10,pointerEvents:"none"}}),H&&u("div",{style:{position:"absolute",top:te.top,left:te.left,zIndex:1e3,width:"200px"},children:u(i,{menu:ve,trigger:["click"],open:!0,onOpenChange:e=>{e||z(null)},children:u("div",{style:{width:"1px",height:"1px"}})})}),U&&u("div",{style:{position:"absolute",top:he.top,left:he.left,zIndex:1e3,width:"200px"},children:u(i,{menu:ke,trigger:["click"],open:!0,onOpenChange:e=>{e||P(null)},children:u("div",{style:{width:"1px",height:"1px"}})})}),F&&u("div",{style:{position:"absolute",top:oe.top,left:oe.left,zIndex:1e3,width:"200px"},children:u(i,{menu:we,trigger:["click"],open:!0,onOpenChange:e=>{e||W(null)},children:u("div",{style:{width:"1px",height:"1px"}})})})]})};export{Be as CDPEditor};